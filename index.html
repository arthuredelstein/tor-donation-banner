<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf8"/>
  <title>Banner demo</title>
  <style>
    #banner {
    background-color: #406;
    background: radial-gradient(circle, #406 90%, #203 100%);
   // background-color: #FFEBFF;
    background-size: cover;
    background-opacity: 10%;
      width: 100%;
      height: 150px;
      position: absolute;
      left: 0px;
      margin-top: 40px;
      border-top: 6px solid #305;
      border-bottom:  8px solid #305;
      display: flex;
      justify-content: center;
      opacity: 1;
      -webkit-touch-callout: none; /* iOS Safari */
      -webkit-user-select: none;   /* Chrome/Safari/Opera */
      -khtml-user-select: none;    /* Konqueror */
      -moz-user-select: none;      /* Firefox */
      -ms-user-select: none;       /* Internet Explorer/Edge */
      user-select: none;           /* Non-prefixed version, currently not supported by any browser */
    }
    #banner:before {
        background-image: url('tor-roots-only.svg');
        opacity: 0.20;
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        background-size: cover;

    }
    .root-bg:before {
    }
    #banner-contents-container {
        position: relative;
        width: 900px;
        height: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
    }
    #banner-text {
        color: white;
//        background-color: red;
        //color: #408;
        display: inline-block;
        flex-grow: 1.0;
        letter-spacing: -0.00em;
        font-weight: 600;
        margin: 0px 15px 0px 25px;
        transform: scale(1.05, 1.19);
        font-family: sans-serif;
        font-size: 40px;
        max-height: 100%;
        -moz-user-select: none;
    }
    #logo-container {
        position: relative;
        display: inline-block;
        margin: 0px;
    }
    #logo {
        position: relative;
        // top: -60px;
        height: 240px;
        width: 167px;
    }
    #donate-button-container {
        transform: translatey(60px);
        text-decoration: none;
    }
    #donate-button-container a {
    }
    #donate-button-container a:link {
        color: #A20;
    }
    #donate-button-container a:hover {
        color: #C40;
    }
    #donate-button-container a:visited {
        color: #408;
    }
    #donate-button-container a:active {
        color: black;
    }
    #donate-button {
        background-color: #FFD;
        border-bottom: 8px solid #204;
        border-left: 6px solid #204;
        border-right: 6px solid #204;
        border-top: 6px solid #204;
        border-bottom-right-radius: 45px;
        border-top-right-radius: 45px;
        color: #A20;
        display: table-cell;
        flex-grow: 0.0;
        font-family: sans;
        font-size: 67px;
        font-weight: bold;
        max-height: 80px;
        width: 270px;
        letter-spacing: -0.00em;
        opacity: 100%;
        padding-bottom: 5px;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 5px;
        text-align: left;
        transform: scale(1, 1.05);
        vertical-align: middle;
    }
  </style>
 </head>
 <body>
  <div id="banner" class="onions-bg">
   <div id="banner-contents-container">
    <div id="logo-container">
     <img id="logo" src="onion-heart.svg">
    </div>
    <div id="banner-text">
     The Tor Project needs your support to continue its important work! More persuasive text goes here.
    </div>
    <div id="donate-button-container">
     <a href="https://torproject.org/donate?blah">
      <div id="donate-button">
        Please donate&nbsp;&#187;
      </div>
     </a>
    </div>
   </div>
  </div>
  <script>
    // Change the font size of text in element by ratio.
    let scaleFontBy = function (element, ratio) {
      let style = window.getComputedStyle(element),
          originalFontSize = parseFloat(style.fontSize),
          targetFontSize = originalFontSize * ratio;
      element.style.fontSize = targetFontSize + "px";
    };

    // Shrink the font size if the text in the given element is overflowing.
    let fitTextInElement = function(element) {
      let style = window.getComputedStyle(element);
      if (style.whiteSpace === "nowrap") {
        // Look for horizontal overflow.
        let elementWidth = element.getBoundingClientRect().width,
            paddingWidth = parseFloat(style.paddingLeft) +
            parseFloat(style.paddingRight),
            targetWidth = elementWidth - paddingWidth,
            textWidth = element.scrollWidth;
        // Compute the appropriate font size to make the text fit.
        let ratio = targetWidth / textWidth;
        scaleFontBy(element, ratio);
      } else {
        // Look for vertical overflow.
        let elementHeight = Math.min(element.clientHeight,
                                     parseFloat(style.maxHeight)),
            paddingHeight = parseFloat(style.paddingTop) +
                            parseFloat(style.paddingBottom),
            targetHeight = elementHeight - paddingHeight;
        // Wrapping causes somewhat difficult-to-predict overflow.
        // So shrink slightly and repeat.
        let ratio = 0;
        for (let i = 0; i < 100 && ratio < 1; ++i) {
          let currentHeight = element.scrollHeight;
          console.log(`currentHeight: ${currentHeight}, targetHeight: ${targetHeight}, fontSize: ${style.fontSize}`);
          ratio = targetHeight < currentHeight ? 0.99 : 1;
          if (ratio < 1) {
            scaleFontBy(element, ratio);
          }
        }
      }
    };


    let bannerText = document.getElementById("banner-text");
    fitTextInElement(bannerText);

    let donateButton = document.getElementById("donate-button");
    fitTextInElement(donateButton);

    let banner = document.getElementById("banner");

    // Useful for future options
    //if (Math.random() > 0) {
      banner.setAttribute("class", "root-bg");
    //}
   </script>
 </body>
</html>
